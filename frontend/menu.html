<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuvipop • Menú Completo</title>
    
    <!-- Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --color-primario: #AEE6F9;
            --color-secundario: #FFB6C1;
            --color-terciario: #D4A5E9;
            --color-acento: #FFD166;
            --color-texto: #333;
            --color-fondo: #F7F7F7;
        }
        
        body {
            background-color: var(--color-fondo);
            font-family: 'Poppins', sans-serif;
            color: var(--color-texto);
        }
        
        .header {
            background: linear-gradient(135deg, var(--color-primario), var(--color-terciario));
            padding: 1.5rem 0;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .logo {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            font-weight: 600;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .logo span {
            color: var(--color-acento);
        }
        
        .slogan {
            font-size: 1rem;
            color: white;
            opacity: 0.9;
            margin-top: -0.5rem;
        }
        
        .categorias {
            margin-bottom: 2rem;
            flex-wrap: nowrap;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .categorias::-webkit-scrollbar {
            height: 5px;
        }
        
        .categorias::-webkit-scrollbar-thumb {
            background-color: var(--color-primario);
            border-radius: 10px;
        }
        
        .categoria-btn {
            background: white;
            border: 2px solid transparent;
            border-radius: 50px;
            padding: 0.5rem 1.5rem;
            margin: 0 0.5rem;
            font-weight: 500;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .categoria-btn:hover, .categoria-btn.active {
            background-color: var(--color-primario);
            border-color: var(--color-primario);
            transform: translateY(-3px);
        }
        
        .producto-card {
            border: none;
            background: white;
            border-radius: 15px;
            padding-bottom: 15px;
            transition: 0.3s;
            height: 100%;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .producto-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }
        
        .producto-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 15px 15px 0 0;
        }
        
        .badge-precio {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--color-acento);
            color: var(--color-texto);
            font-weight: 600;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
        }
        
        .producto-nombre {
            font-weight: 600;
            font-size: 1.1rem;
            margin: 0.8rem 0 0.3rem;
        }
        
        .producto-desc {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.8rem;
            height: 40px;
            overflow: hidden;
        }
        
        .producto-detalle {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 0.5rem;
        }
        
        .btn-pastel {
            background-color: var(--color-primario);
            border: none;
            border-radius: 50px;
            padding: 0.5rem 1.5rem;
            font-weight: 500;
            transition: 0.3s;
        }
        
        .btn-pastel:hover {
            background-color: #93d4e9;
            transform: scale(1.05);
        }
        
        .btn-rosa {
            background-color: var(--color-secundario);
            color: white;
        }
        
        .btn-rosa:hover {
            background-color: #ff9eb0;
        }
        
        .carrito-flotante {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--color-acento);
            color: var(--color-texto);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .carrito-flotante:hover {
            transform: scale(1.1);
        }
        
        .carrito-contador {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4757;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .modal-carrito .modal-header {
            background-color: var(--color-primario);
            color: var(--color-texto);
        }
        
        .modal-footer {
            background-color: #f8f9fa;
        }
        
        .item-carrito {
            border-bottom: 1px solid #eee;
            padding: 1rem 0;
        }
        
        .item-carrito:last-child {
            border-bottom: none;
        }
        
        .footer {
            background-color: white;
            padding: 2rem 0;
            margin-top: 3rem;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .destacado {
            border: 2px solid var(--color-acento);
        }
        
        .destacado-badge {
            background-color: var(--color-acento);
            color: var(--color-texto);
            font-weight: 600;
            padding: 0.2rem 0.8rem;
            border-radius: 5px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            
            .producto-img {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Header con logo -->
    <header class="header">
        <div class="container">
            <div class="text-center">
                <h1 class="logo">Cuvipop<span>•</span></h1>
                <p class="slogan">Dulces momentos en cada bocado</p>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Categorías -->
        <div class="d-flex categorias">
            <button class="categoria-btn active" data-categoria="todos">Todos</button>
            <button class="categoria-btn" data-categoria="bebidas">Bebidas</button>
            <button class="categoria-btn" data-categoria="postres">Postres</button>
            <button class="categoria-btn" data-categoria="helados">Helados</button>
            <button class="categoria-btn" data-categoria="pasteles">Pasteles</button>
            <button class="categoria-btn" data-categoria="especiales">Especiales</button>
            <button class="categoria-btn" data-categoria="saludables">Saludables</button>
        </div>
        
        <!-- Buscador -->
        <div class="row mb-4">
            <div class="col-md-6 offset-md-3">
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="fas fa-search"></i></span>
                    <input type="text" class="form-control border-start-0" id="buscador" placeholder="Buscar en el menú...">
                </div>
            </div>
        </div>
        
        <!-- Contador de productos -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="h4">Nuestros Productos</h2>
            <span id="contador-productos" class="badge bg-secondary">12 productos</span>
        </div>
        
        <!-- Lista de productos -->
        <div id="productos" class="row g-4"></div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="row text-center">
                <div class="col-md-4 mb-3">
                    <h5><i class="fas fa-clock"></i> Horario</h5>
                    <p class="mb-0">Lunes a Viernes: 9am - 10pm</p>
                    <p class="mb-0">Sábados y Domingos: 10am - 11pm</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5><i class="fas fa-map-marker-alt"></i> Ubicación</h5>
                    <p class="mb-0">Calle Dulce 123, Ciudad Sabor</p>
                    <p class="mb-0">Tel: (123) 456-7890</p>
                </div>
                <div class="col-md-4">
                    <h5><i class="fas fa-truck"></i> Delivery</h5>
                    <p class="mb-0">Envío a domicilio en 30 min</p>
                    <p class="mb-0">Mínimo de compra: $10.000</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Carrito flotante -->
    <div class="carrito-flotante" data-bs-toggle="modal" data-bs-target="#modalCarrito">
        <i class="fas fa-shopping-cart fa-lg"></i>
        <div class="carrito-contador">0</div>
    </div>
    
    <!-- Modal del carrito -->
    <div class="modal fade" id="modalCarrito" tabindex="-1" aria-labelledby="modalCarritoLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalCarritoLabel"><i class="fas fa-shopping-cart me-2"></i>Mi Pedido</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carrito-items">
                        <!-- Los productos del carrito se agregarán aquí -->
                        <p class="text-center text-muted my-5">Tu carrito está vacío</p>
                    </div>
                    <!-- Formulario de pedido: fecha, hora, tipo y método de pago -->
                    <div class="mt-4">
                        <h6>Programar pedido</h6>
                        <div class="row g-2 align-items-center">
                            <div class="col-md-4">
                                <label for="pedido_fecha" class="form-label">Fecha</label>
                                <input type="date" id="pedido_fecha" class="form-control" />
                            </div>
                            <div class="col-md-4">
                                <label for="pedido_hora" class="form-label">Hora (11:00 - 19:30)</label>
                                <input type="time" id="pedido_hora" class="form-control" min="11:00" max="19:30" step="900" />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Tipo de entrega</label>
                                <select id="tipo_entrega" class="form-select">
                                    <option value="domicilio">A domicilio</option>
                                    <option value="llevar">Para recoger</option>
                                </select>
                            </div>
                        </div>

                        <div class="mt-3">
                            <label class="form-label">Método de pago</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="metodo_pago" id="mp_efectivo" value="efectivo" checked>
                                    <label class="form-check-label" for="mp_efectivo">Efectivo</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="metodo_pago" id="mp_tarjeta" value="tarjeta">
                                    <label class="form-check-label" for="mp_tarjeta">Tarjeta</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <h5>Total:</h5>
                        <h5 id="carrito-total">$0</h5>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Seguir comprando</button>
                    <button type="button" class="btn btn-pastel" id="vaciar-carrito">Vaciar carrito</button>
                    <button type="button" class="btn btn-rosa" id="realizar-pedido-btn">Realizar pedido</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/cart-indicator.js"></script>
    <script src="js/carrito.js"></script>
    
    <!-- Script del menú -->
    <script>
        // Datos de productos
        const productos = [
            {
                id: 1,
                nombre: "Frappé de Vainilla",
                categoria: "bebidas",
                descripcion: "Delicioso frappé con esencia de vainilla y crema batida",
                detalle: "500ml | 350 cal",
                precio: 8500,
                imagen: "https://images.unsplash.com/photo-1572490122747-3968b75cc699?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: true
            },
            {
                id: 2,
                nombre: "Cupcake de Chocolate",
                categoria: "postres",
                descripcion: "Exquisito cupcake con cobertura de chocolate belga",
                detalle: "1 unidad | 280 cal",
                precio: 5500,
                imagen: "https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 3,
                nombre: "Helado de Fresa",
                categoria: "helados",
                descripcion: "Helado artesanal con trozos de fresa natural",
                detalle: "2 bolas | 210 cal",
                precio: 7000,
                imagen: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: true
            },
            {
                id: 4,
                nombre: "Pastel de Tres Leches",
                categoria: "pasteles",
                descripcion: "Clásico pastel bañado en mezcla de tres leches",
                detalle: "Porción individual | 420 cal",
                precio: 9500,
                imagen: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 5,
                nombre: "Smoothie Tropical",
                categoria: "bebidas",
                descripcion: "Mezcla refrescante de mango, piña y maracuyá",
                detalle: "450ml | 180 cal",
                precio: 8000,
                imagen: "https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 6,
                nombre: "Brownie con Helado",
                categoria: "especiales",
                descripcion: "Brownie caliente acompañado de helado de vainilla",
                detalle: "1 porción | 510 cal",
                precio: 12000,
                imagen: "https://images.unsplash.com/photo-1564355808539-22fda35db7aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: true
            },
            {
                id: 7,
                nombre: "Yogurt con Granola",
                categoria: "saludables",
                descripcion: "Yogurt natural con granola y frutos rojos",
                detalle: "1 taza | 220 cal",
                precio: 6500,
                imagen: "https://images.unsplash.com/photo-1488477181946-6428a0291777?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 8,
                nombre: "Cheesecake de Frutos Rojos",
                categoria: "postres",
                descripcion: "Suave cheesecake con salsa de frutos rojos",
                detalle: "Porción individual | 380 cal",
                precio: 10500,
                imagen: "https://images.unsplash.com/photo-1563805042-7684c019e1cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 9,
                nombre: "Café Helado Caramel",
                categoria: "bebidas",
                descripcion: "Café arábica con leche y salsa de caramelo",
                detalle: "400ml | 240 cal",
                precio: 7500,
                imagen: "https://images.unsplash.com/photo-1461023058943-07fcbe16d735?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 10,
                nombre: "Paleta de Chocolate",
                categoria: "helados",
                descripcion: "Paleta helada bañada en chocolate oscuro",
                detalle: "1 unidad | 190 cal",
                precio: 4500,
                imagen: "https://images.unsplash.com/photo-1570196911496-66bd58a5b7b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            },
            {
                id: 11,
                nombre: "Tarta de Manzana",
                categoria: "pasteles",
                descripcion: "Clásica tarta de manzana con canela",
                detalle: "Porción individual | 320 cal",
                precio: 8500,
                imagen: "https://images.unsplash.com/photo-1561626423-a51b45aef0a4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: true
            },
            {
                id: 12,
                nombre: "Ensalada de Frutas",
                categoria: "saludables",
                descripcion: "Mezcla fresca de frutas de temporada",
                detalle: "1 porción | 150 cal",
                precio: 6000,
                imagen: "https://images.unsplash.com/photo-1519996529931-28324d5a630e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                destacado: false
            }
        ];
        
    // Carrito de compras (persistido en localStorage)
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        
        // Función para formatear precios
        function formatearPrecio(precio) {
            return `$${precio.toLocaleString('es-CO')}`;
        }
        
        // Función para renderizar productos
        function renderizarProductos(productosMostrar) {
            const contenedor = document.getElementById('productos');
            contenedor.innerHTML = '';
            
            productosMostrar.forEach(producto => {
                const destacadoClass = producto.destacado ? 'destacado' : '';
                
                const col = document.createElement('div');
                col.className = 'col-lg-3 col-md-4 col-sm-6';
                
                col.innerHTML = `
                    <div class="producto-card ${destacadoClass}">
                        <div class="position-relative">
                            <img src="${producto.imagen}" class="producto-img" alt="${producto.nombre}">
                            <div class="badge-precio">${formatearPrecio(producto.precio)}</div>
                            ${producto.destacado ? '<div class="destacado-badge">¡Nuevo!</div>' : ''}
                        </div>
                        <div class="p-3">
                            <h5 class="producto-nombre">${producto.nombre}</h5>
                            <p class="producto-desc">${producto.descripcion}</p>
                            <p class="producto-detalle"><i class="fas fa-info-circle me-1"></i>${producto.detalle}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="badge bg-light text-dark">${producto.categoria}</span>
                                <button class="btn btn-pastel btn-agregar" data-id="${producto.id}">
                                    <i class="fas fa-plus me-1"></i>Agregar
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                contenedor.appendChild(col);
            });
            
            // Actualizar contador
            document.getElementById('contador-productos').textContent = `${productosMostrar.length} productos`;
            
            // Agregar eventos a los botones
            document.querySelectorAll('.btn-agregar').forEach(btn => {
                btn.addEventListener('click', agregarAlCarrito);
            });
        }
        
        // Función para agregar productos al carrito
        function agregarAlCarrito(e) {
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const producto = productos.find(p => p.id === id);
            
            // Verificar si el producto ya está en el carrito
            const itemExistente = carrito.find(item => item.id === id);
            
            if (itemExistente) {
                itemExistente.cantidad += 1;
            } else {
                carrito.push({
                    ...producto,
                    cantidad: 1
                });
            }
            
            // Actualizar carrito
            actualizarCarrito();

            // Persistir en localStorage y notificar al indicador global
            localStorage.setItem('carrito', JSON.stringify(carrito));
            if (window.updateCartIndicator) window.updateCartIndicator();
            
            // Mostrar notificación
            mostrarNotificacion(`${producto.nombre} agregado al carrito`);
        }
        
        // Función para actualizar el carrito
        function actualizarCarrito() {
            // Actualizar contador
            const totalItems = carrito.reduce((total, item) => total + item.cantidad, 0);
            document.querySelector('.carrito-contador').textContent = totalItems;

            // Guardar estado del carrito en localStorage
            localStorage.setItem('carrito', JSON.stringify(carrito));
            
            // Actualizar modal del carrito
            const carritoItems = document.getElementById('carrito-items');
            const carritoTotal = document.getElementById('carrito-total');
            
            if (carrito.length === 0) {
                carritoItems.innerHTML = '<p class="text-center text-muted my-5">Tu carrito está vacío</p>';
                carritoTotal.textContent = '$0';
                return;
            }
            
            // Renderizar items del carrito
            carritoItems.innerHTML = '';
            let total = 0;
            
            carrito.forEach(item => {
                const subtotal = item.precio * item.cantidad;
                total += subtotal;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item-carrito';
                
                itemDiv.innerHTML = `
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="mb-1">${item.nombre}</h6>
                            <p class="text-muted mb-1 small">${item.detalle}</p>
                            <div class="d-flex align-items-center">
                                <button class="btn btn-sm btn-outline-secondary btn-restar" data-id="${item.id}">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="mx-2">${item.cantidad}</span>
                                <button class="btn btn-sm btn-outline-secondary btn-sumar" data-id="${item.id}">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger ms-2 btn-eliminar" data-id="${item.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-end">
                            <p class="mb-1 fw-bold">${formatearPrecio(subtotal)}</p>
                            <p class="text-muted small mb-0">${formatearPrecio(item.precio)} c/u</p>
                        </div>
                    </div>
                `;
                
                carritoItems.appendChild(itemDiv);
            });
            
            // Agregar eventos a los botones del carrito
            document.querySelectorAll('.btn-sumar').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    const item = carrito.find(item => item.id === id);
                    if (item) {
                        item.cantidad += 1;
                        actualizarCarrito();
                    }
                });
            });
            
            document.querySelectorAll('.btn-restar').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    const itemIndex = carrito.findIndex(item => item.id === id);
                    
                    if (itemIndex !== -1) {
                        if (carrito[itemIndex].cantidad > 1) {
                            carrito[itemIndex].cantidad -= 1;
                        } else {
                            carrito.splice(itemIndex, 1);
                        }
                        actualizarCarrito();
                    }
                });
            });
            
            document.querySelectorAll('.btn-eliminar').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    const itemIndex = carrito.findIndex(item => item.id === id);
                    
                    if (itemIndex !== -1) {
                        carrito.splice(itemIndex, 1);
                        actualizarCarrito();
                    }
                });
            });
            
            // Actualizar total
            carritoTotal.textContent = formatearPrecio(total);
        }
        
        // Función para mostrar notificaciones
        function mostrarNotificacion(mensaje) {
            // Crear elemento de notificación
            const notificacion = document.createElement('div');
            notificacion.className = 'position-fixed bottom-0 end-0 m-3 p-3 bg-success text-white rounded shadow';
            notificacion.style.zIndex = '1050';
            notificacion.style.maxWidth = '300px';
            notificacion.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-check-circle me-2"></i>
                    <span>${mensaje}</span>
                </div>
            `;
            
            document.body.appendChild(notificacion);
            
            // Remover después de 3 segundos
            setTimeout(() => {
                notificacion.remove();
            }, 3000);
        }
        
        // Función para filtrar por categoría
        function filtrarPorCategoria(categoria) {
            let productosFiltrados;
            
            if (categoria === 'todos') {
                productosFiltrados = productos;
            } else {
                productosFiltrados = productos.filter(producto => producto.categoria === categoria);
            }
            
            renderizarProductos(productosFiltrados);
        }
        
        // Función para buscar productos
        function buscarProductos(termino) {
            const terminoLower = termino.toLowerCase();
            const productosFiltrados = productos.filter(producto => 
                producto.nombre.toLowerCase().includes(terminoLower) || 
                producto.descripcion.toLowerCase().includes(terminoLower) ||
                producto.categoria.toLowerCase().includes(terminoLower)
            );
            
            renderizarProductos(productosFiltrados);
        }
        
        // Inicializar página
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar todos los productos al inicio
            renderizarProductos(productos);
            
            // Agregar eventos a los botones de categoría
            document.querySelectorAll('.categoria-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remover clase active de todos los botones
                    document.querySelectorAll('.categoria-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // Agregar clase active al botón clickeado
                    this.classList.add('active');
                    
                    // Filtrar productos
                    const categoria = this.getAttribute('data-categoria');
                    filtrarPorCategoria(categoria);
                });
            });
            
            // Agregar evento al buscador
            document.getElementById('buscador').addEventListener('input', function() {
                buscarProductos(this.value);
            });
            
            // Agregar evento al botón de vaciar carrito
            document.getElementById('vaciar-carrito').addEventListener('click', function() {
                carrito = [];
                actualizarCarrito();
                mostrarNotificacion('Carrito vaciado');
                localStorage.removeItem('carrito');
                if (window.updateCartIndicator) window.updateCartIndicator();
            });
            
            // Inicializar carrito
            actualizarCarrito();
            if (window.updateCartIndicator) window.updateCartIndicator();

            // Conectar botón realizar pedido al método global (si existe)
            const btnRealizar = document.getElementById('realizar-pedido-btn');
            if (btnRealizar && typeof realizarPedido === 'function') {
                btnRealizar.addEventListener('click', realizarPedido);
            }
        });
    </script>
</body>
</html>