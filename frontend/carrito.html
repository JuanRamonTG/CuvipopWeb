<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuvipop • Carrito</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { background-color: #F7F7F7; font-family: 'Poppins', sans-serif; }
        .btn-pastel { background-color: #AEE6F9; border: none; }
        .btn-pastel:hover { background-color: #93d4e9; }
        .navbar {
            background-color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 15px 0;
        }
        .navbar-brand {
            font-family: 'Lilita One', cursive;
            font-size: 1.8rem;
            color: #FF7BAC;
            letter-spacing: 1px;
        }
        .nav-link {
            font-weight: 500;
            color: #333 !important;
            margin: 0 8px;
        }
    </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand" href="/static/index.html"><span style="color:#7AD7F0;">Cuvi</span>pop</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="nav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a class="nav-link" href="/static/menu.html">Menú</a></li>
                <li class="nav-item"><a class="nav-link" href="/static/carrito.html">Carrito</a></li>
                <li class="nav-item"><a class="nav-link" href="/static/login.html">Iniciar sesión</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h2 class="text-center mb-4">Carrito de compras</h2>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cant.</th>
                <th>Precio</th>
                <th>Subtotal</th>
                <th></th>
            </tr>
        </thead>

        <tbody id="lista"></tbody>
    </table>

    <h4 class="mt-4">Total: $<span id="total">0.00</span></h4>

    <!-- Formulario de pedido (igual que en menú) -->
    <div class="row g-2 mt-3">
        <div class="col-md-4">
            <label for="pedido_fecha" class="form-label">Fecha</label>
            <input type="date" id="pedido_fecha" class="form-control" />
        </div>
        <div class="col-md-4">
            <label for="pedido_hora" class="form-label">Hora (11:00 - 19:30)</label>
            <input type="time" id="pedido_hora" class="form-control" min="11:00" max="19:30" step="900" />
        </div>
        <div class="col-md-4">
            <label class="form-label">Tipo de entrega</label>
            <select id="tipo_entrega" class="form-select">
                <option value="domicilio">A domicilio</option>
                <option value="llevar">Para recoger</option>
            </select>
        </div>
    </div>

    <div class="mt-3">
        <label class="form-label">Método de pago</label>
        <div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodo_pago" id="mp_efectivo" value="efectivo" checked>
                <label class="form-check-label" for="mp_efectivo">Efectivo</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodo_pago" id="mp_tarjeta" value="tarjeta">
                <label class="form-check-label" for="mp_tarjeta">Tarjeta</label>
            </div>
        </div>
    </div>

    <button class="btn btn-pastel mt-4 w-100" onclick="realizarPedido()">
        Confirmar Pedido ✔
    </button>
</div>

<!-- Modal de Login (aparece si intenta pedir sin sesión) -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #AEE6F9;">
                <h5 class="modal-title">Inicia sesión para continuar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Para realizar tu pedido, necesitas tener una cuenta activa. ¿Ya tienes cuenta?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <a href="/static/login.html" class="btn btn-pastel">Iniciar sesión</a>
                <a href="/static/registro.html" class="btn btn-outline-pastel">Crear cuenta</a>
            </div>
        </div>
    </div>
</div>

<!-- Indicador global del carrito -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/auth.js"></script>
<script src="/static/js/cart-indicator.js"></script>
<script src="/static/js/carrito.js"></script>

</body>
</html>
